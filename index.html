<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>iTest</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body {
  font-family: Arial, sans-serif;
  background: #f4f6f8;
  text-align: center;
  padding: 20px;
}

h1 {
  color: #006400;
  font-size: 42px;
  margin-bottom: 20px;
}

input {
  width: 80%;
  max-width: 400px;
  padding: 12px;
  font-size: 18px;
  border: 2px solid #006400;
  border-radius: 8px;
  margin-bottom: 20px;
}

table {
  width: 95%;
  margin: auto;
  border-collapse: collapse;
  background: white;
}

th, td {
  border: 1px solid #ccc;
  padding: 10px;
  font-size: 16px;
}

th {
  background: #e8f5e9;
}
</style>
</head>

<body>

<h1>iTest</h1>

<input type="text" id="search" placeholder="ابحث عن طالب...">

<table id="studentsTable">
  <thead>
    <tr>
      <th>العمود 1</th>
      <th>العمود 2</th>
      <th>العمود 3</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<script>
const csvUrl =
"https://docs.google.com/spreadsheets/d/e/2PACX-1vQpvziG2pi3c-qHGIJuP2M5RxUXgkWtK_5I1oPxSRhcp8ml7Ty8b4JVP-OogglSp1ddcYh7WSsUvABV/pub?output=csv";

fetch(csvUrl)
  .then(res => res.text())
  .then(csv => {
    const rows = csv.trim().split("\n").slice(1);
    const tbody = document.querySelector("#studentsTable tbody");

    rows.forEach(row => {
      const cols = row.split(",");
      if (cols.length >= 3) {
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td>${cols[0]}</td>
          <td>${cols[1]}</td>
          <td>${cols[2]}</td>
        `;
        tbody.appendChild(tr);
      }
    });
  });

// البحث
document.getElementById("search").addEventListener("input", function () {
  const value = this.value.toLowerCase();
  document.querySelectorAll("#studentsTable tbody tr").forEach(row => {
    row.style.display = row.textContent.toLowerCase().includes(value)
      ? ""
      : "none";
  });
});
</script>

</body>
</html>
